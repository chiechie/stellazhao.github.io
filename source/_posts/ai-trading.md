---
title: 人工智能交易系统
author: chiechie
mathjax: true
date: 2021-07-25 14:43:08
tags:
- 量化
- 强化学习
categories: 
- 阅读
---



> **Denny Britz**的一篇blog，翻译下



1. 交易是一个multi agent问题。
2. 现实中，有效市场假设（ Efficient Market Hypothesis， EMH）不成立。构建一个赚钱的交易系统是可能的，虽然套利机会最终会消失，但是市场反应时间通常要几个月，几年，（就作者的经验来说有12个月）这个时间内可以寻找新的机会。
3. 选择什么视角看待市场？经济学？No！博弈论（Game Theory ）或者强化学习视角。
4. 市场并不存在，市场是许多agents为了最大化自己的目标，在一个environment中采取行动的自然产物，每个agent的行动目标都不一样，有一些人为了卖掉期权中获得的股票，有些人为了快速获利而进行套利。有些人试图根据新闻来预测短期走势。一些基金经理基于基本面的长期投资。一些做市商，为特定资产或交易所提供流动性，以换取费用。
5. 科技从业者更看重“绝对性”，交易更看重“相对性”。
6. 科技从业者使用开源的已有的轮子，交易基础设施最好自己构建。如果你和其他人使用同样的技术，你的优势从何而来？每一种可以定制化的技术都是一个击败竞争对手的机会。通过混合云，你可以减少延迟。通过以高效的二进制格式存储数据，可以节省序列化时间，从而在开发过程中实现更快的迭代，并在生产中实现更快的预测。通过创建与交易所的自定义集成，而不是使用现成的 api，您可以使用其他人无法获得的特定订单类型，或者通过处理特定于交易所的信息获得信息优势。诸如此类。构建高度定制化的非通用系统是工程师最讨厌的。我们喜欢概括和抽象。但是专业化通常是你在交易中的优势所在。
7. 你可能会说，我不想在基础设施方面竞争。相反，我想建立一个更聪明的模型，能够做出更好的预测。那是我的优势！我听过很多这样的话，但从来没有见过这样的效果。
8. 人工智能相当商品化。我想说，它比优秀的基础设施工程、数据收集或来自领域知识的归纳偏见更为商品化。现在，您可以轻松地下载最先进的模型并在数据上运行它们。除非你站在一些极其相关的研究的前沿，否则你不太可能仅仅通过训练一个更好的模型就获得显著的优势。
9. 当人们意识到他们幻想的人工智能模型建立在蹩脚的基础设施上，用蹩脚的数据训练(这也是每个人都在使用的)不起作用时，他们就放弃了。人工智能可以给你一个优势，但不是一个如此巨大的优势，以至于你可以忽略其他因素。您仍然需要构建良好的基础设施，获得良好的数据，拥有良好的延迟等等。很少有人愿意花时间在这些unsexy的事情上。把每一个想象成一个倍增器。如果一个接近于零，那么你的人工智能模型有多好并不重要。这些倍增器是什么呢？：

   1.  市场：选择合适的市场进行交易。不要选择那些每个人都会默认选择的显而易见的选择。无论是从法律上还是从技术上讲，进入一个市场的难度越大，你就越有可能找到机会。流动性较差的市场可能会被成熟的基金忽视，因为它们的资产管理规模不够大。同样，对于追求“好的 api”的工程师来说，这通常是违反直觉的——好的 api 通常意味着流行。大众化通常意味着商品化
   2. 数据：考虑其他人无法访问或不愿意访问的数据源。例如，由于限制 IP 禁令，可能有数据难以被爬虫。大多数人会放弃这里。这对你来说是个机会。对流行的 api 和开源软件持怀疑态度。这些数据和其他人使用的数据是一样的
   3. 延迟：你可能不打算与高频交易商竞争(坏主意) ，但这并不意味着你可以完全忽略延迟。更好的延迟可能会导致更容易的执行，减少延误。注意将系统驻留在何处，如何发送数据，如何序列化数据等等
   4. 模型：一般来说，更好的数据比更好的模型更重要，但更好的模型也可以给你一个优势。请注意，您经常在模型复杂性和延迟之间进行权衡
   5. 执行：如果不能执行，一个好模型就是0。收集的历史数据可能与交易所实际发生的情况非常不同。尽快开始交易！
10. 强化学习交易是市场交易的正确方法吗？是的，而且我个人也成功地做到了。然而有很多技巧是必要的。强化学习的主要好处是你不需要建立一个可微损失函数。相反，你可以在一段时间内直接优化盈亏。通过构建一个良好的simulation，模型可以学会对延迟、抖动以及在真实市场中可能发生的其他事情保持稳定。
11. 监督式学习？很难work，有许多超参数需要设置好---以什么时间范围来学习？优化目标(对数收益？头寸大小?)？什么时候平仓？如何处理来自延迟、拒绝订单、API issues等带来的随机性？如何处理非 iid 数据？诸如此类。我相信如果你真的很努力的话，你可以做到这一点，但是依靠 simulation-based的方法似乎是一个更有原则的解决方案。
12. 强化学习仍然有一些问题需要客服：

    1. 稀疏的正反馈: 仅依靠随机的探索和rewards回报，不太可能发现好的策略
    2. 需要推广到未来的数据。研究人员容易忽视泛化性，在“在训练集上测试”
    3. 有了一个好的simulator，envvironment可以提供许多随机性，如延迟、抖动、 API 问题、slippage等等
    4. 非平稳性：市场数据分布随着时间的推移而变化，agent须学会处理它
    5. 观测信号中的低信噪比
13. 大多数市场的inefficienc都是转瞬即逝的，因为其他agent会适应你的策略。多么短暂？这要看情况。根据交易的地点和方式，它们可能持续几毫秒、几秒、几分钟、几小时、几天、几周或几个月。持续盈利的方法就是持续善于发现转瞬即逝的机会。这是元学习。
14. 在训练模型时优化外循环的速度。在发现新策略和调整您的模型和基础设施方面，您可以迭代得越快越好。围绕这个建立你的基础设施。查询和装载大容量历史数据来玩应该尽可能快。特别注意反序列化成本。在构建与引擎匹配的市场模拟器时，要进行广泛的基准测试。最小化 RPC 和网络往返次数。我们现在谈论的是数量级。我的第一个模拟器比最近的模拟器慢50倍。由于模型是在模拟中训练的，这意味着在训练时迭代速度要快50倍。自动化数据可视化管理，这样当你得到意想不到的结果时，你可以很容易地查看它们。
15. 当市场下跌时，你不能赚钱？No。一个常见的错误观点和，我很幸运，因为市场在上涨而获得了利润。
16. 不用做空任何东西，很少有市场一直下跌的情况。当人们说市场下跌时，他们谈论的是一个特定的时间尺度。市场可能按日或小时的比例绘制下跌图表。这并不意味着在更短的时间尺度上只有向下的运动。它可能会大幅波动。一旦你开始放大到秒和毫秒，总会出现你在小时、每日或每月图表上看不到的上下波动。我们仍然有可能从中获利，而不用做空任何东西。
17. 就个人而言，我总是在下降趋势(每小时或每天的规模)比上升趋势做得更多。我还是不知道为什么会这样。这可能是因为市场的这一边有更多的流动性，或者是因为当价格开始下跌时，更多不知情的交易者提交了幼稚的指令进入市场。

19. 对十几个来自不同背景的交易员提出同样的问题，你会得到十几个不同的意见。请注意，我使用的是观点（opinions），而不是答案或事实。因为交易是一个如此神秘的领域，很少有被广泛接受的真理。人们并不共享相同的背景知识，他们在各地使用不同的术语。如果你想学习交易，那是很难的。我不知道有哪个网络资源在算法交易教学方面做得很好。你在网上找到的大多数课程和辅导都是大师写的——他们通过教学赚钱，但是他们自己从来没有建立一个有利可图的系统。他们可能会试图向你推销他们的 SaaS 产品。

20. 研究论文也是如此。我订阅了 [arXiv](https://arxiv.org/list/q-fin.TR/recent)。但是，与机器学习等领域相比，论文平均质量相当低。偶尔也会有一些有趣的想法，但绝大多数都是人们试图找到工作并在简历上写点什么的实验——在现实世界中，这些都是行不通的。显然，运营着一个盈利系统的人没有任何动机去发表一篇关于它的论文。像《交易和交易所: 从业者的市场微观结构》和《Advances in Financial Machine Learning》是很好起点，但是根据我的经验，没有什么比在实践中学习或者找到一个导师更好的了。

    

# 参考

1. [ applying Reinforcement Learning to the markets](http://www.wildml.com/2018/02/introduction-to-learning-to-trade-with-reinforcement-learning/)

2.  [关于有效市场及哦啊说的争论](https://www.youtube.com/watch?v=bM9bYOBuKF4) 
