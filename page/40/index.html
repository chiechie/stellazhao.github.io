<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"chiechie.github.io","root":"/","images":"/images","scheme":"Gemini","version":"8.7.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="a reader &amp; thinker">
<meta property="og:type" content="website">
<meta property="og:title" content="Chiechie&#39;s Mini World">
<meta property="og:url" content="https://chiechie.github.io/page/40/index.html">
<meta property="og:site_name" content="Chiechie&#39;s Mini World">
<meta property="og:description" content="a reader &amp; thinker">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Chiechie">
<meta property="article:tag" content="博客, AI, 互联网">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://chiechie.github.io/page/40/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/40/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Chiechie's Mini World</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style><link rel="alternate" href="/atom.xml" title="Chiechie's Mini World" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Chiechie's Mini World</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">人生得意须尽欢</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Chiechie</p>
  <div class="site-description" itemprop="description">a reader & thinker</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">177</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">205</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://chiechie.github.io/2021/04/27/reinforcement_learning/rl9_application/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chiechie">
      <meta itemprop="description" content="a reader & thinker">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chiechie's Mini World">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/27/reinforcement_learning/rl9_application/" class="post-title-link" itemprop="url">强化学习9 应用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-27 08:22:04" itemprop="dateCreated datePublished" datetime="2021-04-27T08:22:04+08:00">2021-04-27</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-09 08:29:06" itemprop="dateModified" datetime="2021-07-09T08:29:06+08:00">2021-07-09</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">强化学习</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="应用场景">应用场景</h2>
<ol type="1">
<li><p>商品推荐: 每个用户的信息作为state，推荐的商品是action，长期看用户的点击率/浏览时长/消费额reward</p></li>
<li><p>网约车调度：&lt;地址，时间&gt;为state为，每个地址在每个时间的冷门程度是value。</p></li>
<li><p>自动生成SQL语句：</p></li>
<li><p>神经网络结构搜索(NAS)：</p>
<blockquote>
<p>NAS is closely related to hyperparameter optimization and is a subfield of automated machine learning (AutoML)</p>
</blockquote></li>
<li><p>游戏：生成NPC</p></li>
<li><p>交易机器人</p></li>
<li><p>控制机器人</p></li>
</ol>
<h3 id="商品推荐">商品推荐</h3>
<p>强化学习可以讲一个很美好的故事：数据驱动的自动化运营。</p>
<p>实际落地时，强化学习的效果如何？强化学习很难调，实际效果没有监督学习好。</p>
<p>系统太复杂又是个黑盒，人hold不住。</p>
<p>facebook在内容推荐技术的很多细分场景上开始应用强化学习，eg消息推送时，以用户的长期活跃为目标，而不是短期打开率为目标。</p>
<p>增强学习的好处是把两万名算法工程师从调参工作中解放出来，让分发策略在长期创造更多价值。</p>
<h3 id="网约车调度">网约车调度</h3>
<p>滴滴的paper是这么写的，不知道生产系统是不是这么用的。</p>
<h3 id="神经网络结构搜索nas">神经网络结构搜索（NAS）</h3>
<p>就好像下一盘棋一样，一局玩完可能要很久，所以每走一步，都可以，判断当前这步棋走的水平如何。</p>
<p>但是只有当一盘都下完了，我们才真的知道具体的reward。</p>
<p>NAS是auto-ml的子领域，为了让机器去设计神经网络。 2017年谷歌发了一篇paper，使用基于强化学习的思路，去设计网络结构。 具体思路是这样的，假设要设计一个20层的CNN，超参个数为20*3，即每一层卷积，需要设置：</p>
<ul>
<li>卷积核数量</li>
<li>卷积核大小</li>
<li>步长大小</li>
</ul>
<p>怎么定义为强化学习的问题呢？</p>
<ul>
<li>state：截至目前，已经确定的超参。</li>
<li>action：超参取值</li>
<li>policy value function：选择某组超参，长期收益，也就是验证集上的准确率。</li>
<li>策略网络：一个RNN。</li>
</ul>
<p>输入向量 <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.357ex" xmlns="http://www.w3.org/2000/svg" width="2.059ex" height="1.357ex" role="img" focusable="false" viewBox="0 -442 910.3 599.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="mi" transform="translate(605,-150) scale(0.707)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g></g></g></g></svg></mjx-container></span> 是对上一个超参数 <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.471ex" xmlns="http://www.w3.org/2000/svg" width="4.007ex" height="1.468ex" role="img" focusable="false" viewBox="0 -441 1770.9 649"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="TeXAtom" transform="translate(562,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mo" transform="translate(361,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(1139,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></g></g></svg></mjx-container></span> 做 Embedding 得到的</p>
<p>策略函数为什么不用监督算法拟合（like 贝叶斯优化里面的的高斯过程回归）？ 因为超参有可能是离散的，也就是说，损失和奖励对于策略网络参数<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.023ex" xmlns="http://www.w3.org/2000/svg" width="1.061ex" height="1.618ex" role="img" focusable="false" viewBox="0 -705 469 715"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"></path></g></g></g></svg></mjx-container></span>不可微。(btw,贝叶斯优化本身也处理不了离散的超参。)</p>
<p>应用强化学习的代价？需要大量的训练样本，至少上万个奖励，即从初始化开始训练几万个CNN，计算量非常大。</p>
<p>后面学术界提出了更优秀的NAS方法--DARTS 及其变体。</p>
<h3 id="交易机器人">交易机器人</h3>
<p>使用强化学习构建股票交易机器人，看到github有一个项目 <a target="_blank" rel="noopener" href="https://github.com/wangshub/RL-Stock">使用强化学习炒股</a>。</p>
<p>大概建模思路是这样，state是当前的市场行情数据，action是买/卖/hold，reward就是盈利。</p>
<p>这个思路是可以的，监督学习最多可以构建一个简单的基于预测的交易策略，比如高买低卖。强化学习可能可以学到更多的人意想不到的交易策略。</p>
<p>但是，因为模型的黑盒和不可预测性，类似无人驾驶，无人运维，很难让人放心把这么重要的事情交给一个机器人手里。</p>
<h2 id="什么制约强化学习的应用">什么制约强化学习的应用？</h2>
<p>到目前为止，强化学习最成功的应用仍然是Atari游戏、围棋游戏、星际争霸游戏。 工业界有很多应用尝试过强化学习，但是其中成功的并不多。 究竟是什么在制约深度强化学习的落地应用呢？</p>
<h3 id="所需要的样本数量过大">所需要的样本数量过大</h3>
<p>举几个简单例子</p>
<ol type="1">
<li>Atari游戏属于最简单的电子游戏，Rainbow DQN需要1800万帧才能达到人类玩家水平。</li>
<li>AlphaGo Zero用了2900万局自我博弈，每一局约有100个状态和动作。</li>
<li>TD3算法在MuJoCo物理仿真环境中训练模拟机器人时，虽然只有几个关节需要控制，但是在样本数量100万时尚未收敛</li>
</ol>
<p>复杂的场景，需要的样本更多。</p>
<p>在电子游戏中获取上亿万的样本并不难，但在现实问题中每获取一个样本都是比较 困难的。比如</p>
<ol type="1">
<li>在NAS的例子中，每获取一个奖励，需要训练一个 CNN，从初始 化到梯度算法收敛，需要一个 GPU 约一小时的计算量</li>
<li>机械手臂抓取一个物体至少需要几秒钟时间，那么一天只能收集1w个样本;同时用十个机械手臂，连续运转一百天，才能收集到1000w个样本，未必够训练一个深度强化学习模型。</li>
</ol>
<p>强化学习所需的样本量太大，这会限制强化学习在现实中 的应用。</p>
<h3 id="探索阶段代价太大">探索阶段代价太大</h3>
<ol type="1">
<li>强化学习要求智能体与环境交互，用收集到的经验去更新策略。在交互的过程中，智能体会改变环境.</li>
<li>在仿真、游戏的环境中，智能体对环境造成任何影响都无所谓。但是在现实世界中，智能体对环境的影响可能会造成巨大的代价。</li>
<li>在强化学习初始的探索阶段，策略几乎是随机的。如果是物理世界中的应用，智能 体的动作难免造成很大的代价。如果应用到推荐系统中，如果上线一个随机的推荐策略， 那么用户的体验会极差，很低的点击率也会给网站造成收入的损失。如果应用到自动驾 驶中，随机的控制策略会导致车辆撞毁。如果应用到医疗中，随机的治疗方案会致死致 残。</li>
<li>在物理世界的应用中，不能直接让初始的随机策略与环境交互，而应该先对策略做预训练，再在真实环境中部署。一种方法是事先准备一个数据集，用行为克隆等监督学习方法做预训练。另一种方法是搭建模拟器，在模拟器中预训练策略。比如阿里巴巴提 出的“虚拟淘宝”系统是对真实用户的模仿，用这样的模拟器预训练推荐策略。离线强化学习 (Offline RL) 是一个热门而又有价值的研究方向.</li>
</ol>
<h3 id="调参难">调参难</h3>
<p>强化学习的超参数分两种:神经网络结构超参数、算法超参数。这两类超参数的设置都严重影响实验效果：</p>
<ul>
<li><p>结构超参数: 神经网络结构超参数包括层数、宽度、激活函数。在监督学习中，在隐层中用不同的激活函数(比如 ReLU、 Leaky ReLU)对结果影响很小，因此用ReLU就可以。但是在深度强化学习中，隐层激活函数对结果的影响很大;有时ReLU远好于Leaky ReLU，有时Leaky ReLU远好于ReLU。由于这种不一致性，在实践中不得不尝试不同的激活函数。</p></li>
<li><p>算法超参数: 强化学习中的算法超参数很多，包括学习率、批大小 (Batch Size)、经验回放的参数、探索用的噪声，比如Rainbow调了超过10种算法超参数</p>
<ul>
<li>学习率(即梯度算法的步长)对结果的影响非常大，并且DDPG、 TD3、A2C等方法中不止有一个学习率。策略网络、价值网络、目标网络中都有各自的学习率。</li>
<li>如果用经验回放，还有几个超参：回放数组的大小、经验回放的起始时间等。论文[37]中的实验显示回放数组的大小对结果有影响，过大或者过小都不好。经验回放的起始时间也需要调，比如Rainbow在收集到8万条四元组时开始经验回放，而标准的DQN则最好是在收集到20万条之后开始经验回放[49]。</li>
<li>在探索阶段，DQN、DPG等方法的动作中应当加入一定噪声。「噪声的大小」是需要调的超参数，它可以平衡Exploration和Exploitation。除了设置初始的噪声幅度，还要设置噪声的衰减率，让噪声逐渐变小。</li>
</ul></li>
</ul>
<h4 id="实验效果严重依赖于实现的好坏">实验效果严重依赖于实现的好坏</h4>
<p>上面的讨论目的在于说明超参数对结果有重大影响。对于相同的方法，不同的人会有不同的实现，比如用不同的网络结构、激活函数、训练算法、学习率、经验回放、噪声。哪怕是一些细微的区别，也会影响最终的效果。论文[48]使用了几个比较有名的开源代码，它们都有TRPO和DDPG方法在Half-Cheetah环境中的实验。论文使用了它们的默认设置，比较了实验结果，如图 19.18 所示。很显然， 相同的方法，不同人的编程实现，实验效果差距巨大。</p>
<figure>
<img src="img_1.png" alt="19.18"><figcaption aria-hidden="true">19.18</figcaption>
</figure>
<h4 id="实验对比的可靠性问题">实验对比的可靠性问题</h4>
<p>如果一篇学术论文提出一种新的方法，往往要在Atari、 MuJoCo 等标准的实验环境中做实验，并与DQN、DDPG、TD3、A2C、TRPO 等有名的基线做实验对照。通常只有当新的方法效果显著优于基线时，论文才有可能发表。但是基线算法的表现严重依赖编程实现的好坏。如果你提出一种新方法，可以把自己的方法实现得非常好，然后从开源的实现中选一个不那么好的基线做实验对比，就可以轻松打败基线算法啦。</p>
<h3 id="稳定性极差">稳定性极差</h3>
<p>强化学习训练的过程中充满了随机性。除了环境的随机性之外，随机性还来自于神经网络随机初始化、决策的随机性、经验回放的随机性。想必大家都有这样的经历:用完全相同的程序和超参数，仅更改随机种子 (Random Seed)，就会导致训练的效果有天壤之别。</p>
<p>如图 19.19所示，如果重复训练十次，往往会有几次完全不收敛。哪怕是非常简单的问题，也会出现这种不收敛的情形。</p>
<figure>
<img src="img.png" alt="图 19.19"><figcaption aria-hidden="true">图 19.19</figcaption>
</figure>
<p>在监督学习中，由于随机初始化和随机梯度中的随机性，即使用同样的超参数，训练出的模型表现也会不一致，测试准确率可能会差<strong>几个百分点</strong>。但是监督学习中几乎不会出现图 19.19 中这种情形;如果出现了，几乎可以肯定代码中有错。但是强化学习确实会出现完全不收敛的情形，哪怕代码和超参数都是对的。</p>
<h2 id="参考">参考</h2>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://rct.ai/zh-hans/blog/the-key-technology-behind-morpheus-engine">rct的混沌球算法</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/wangshusen/DRL/tree/master/Notes_CN">DRL-wangshusen中文教材</a></li>
<li><a target="_blank" rel="noopener" href="https://lilianweng.github.io/lil-log/2020/08/06/neural-architecture-search.html">NAS-介绍</a></li>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Neural_architecture_search">NAS-wiki</a></li>
<li><a target="_blank" rel="noopener" href="https://arxiv.org/abs/1806.09055">DARTS: Differentiable Architecture Search-paper</a></li>
<li><a href="https://chiechie.github.io/2021/03/24/technology/bayes-optimization//">chiechie: 贝叶斯优化</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/wangshub/RL-Stock">使用强化学习炒股</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://chiechie.github.io/2021/04/26/reading_notes/investment/how-to-difi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chiechie">
      <meta itemprop="description" content="a reader & thinker">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chiechie's Mini World">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/26/reading_notes/investment/how-to-difi/" class="post-title-link" itemprop="url">how to Defi</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-26 23:09:36" itemprop="dateCreated datePublished" datetime="2021-04-26T23:09:36+08:00">2021-04-26</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-09 08:29:06" itemprop="dateModified" datetime="2021-07-09T08:29:06+08:00">2021-07-09</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%95%E8%B5%84/" itemprop="url" rel="index"><span itemprop="name">投资</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="第3章-去中心化层-以太坊">第3章 去中心化层-以太坊</h2>
<ul>
<li>为了在以太坊上执行智能合约，你 需要用以太币来支付被称为Gas的费用。 &gt; 付钱给谁了呀？</li>
</ul>
<h2 id="第4章">第4章</h2>
<figure>
<img src="metauniverse/img.png" alt="img.png"><figcaption aria-hidden="true">img.png</figcaption>
</figure>
<h2 id="第5章-去中心化的稳定币">第5章 去中心化的稳定币</h2>
<ul>
<li>大部分稳定币采用了法币抵押型系统来维持对美元的锚定。</li>
<li>Tether是一种中心化的，法币 抵押型稳定币。</li>
<li>DAI是一种去中心化，加密货币作抵押的稳定币。</li>
</ul>
<blockquote>
<p>现在各大央行也在开始发行稳定币了，比如英国的英镑币。</p>
</blockquote>
<figure>
<img src="img1.png" alt="img.png"><figcaption aria-hidden="true">img.png</figcaption>
</figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/39/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/39/">39</a><span class="page-number current">40</span><a class="page-number" href="/page/41/">41</a><span class="space">&hellip;</span><a class="page-number" href="/page/89/">89</a><a class="extend next" rel="next" href="/page/41/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chiechie</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
